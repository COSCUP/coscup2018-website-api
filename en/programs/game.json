{"talks":{"game":{"talk":"game","track":"ruby","speakers":["蒼時弦也"],"begin":"2018-08-12T14:50:00+08:00","end":"2018-08-12T15:30:00+08:00","title":"來做一個日系卡牌手遊吧！ ","intro":"### 很簡單的原理（30min）\n\n如果你是一個網站開發者，其實已經掌握了必要的條件。日系的卡牌手遊跟過去我們熟悉的線上遊戲不太一樣的地方，主要是在於不需要保持連線，以及玩家的即時互動。\n\n所以，開發一個日系卡牌手遊主要就會落在兩個重點上。\n\n* API 伺服器\n* 遊戲端的表演\n\n使用 Ruby on Rails 來開發手遊是一個不錯的選擇，必要的功能都已經具備，只需要透過實作將想要設計的手遊製作出來。\n\n接下來我們會實作手遊的登入、抽卡跟任務關卡。\n\n### 搭建 OAuth 伺服器（60min）\n\n如果有 App 開發經驗的話，可能會知道使用 OAuth 算是一個不錯的選擇。而常被跟 Unity3D 搭配來開發一些簡易的手遊伺服端功能的 FireBase 服務，也是採用 OAuth 的方式。\n\n所以，我們要先使用 Ruby on Rails 的 OAuth 伺服器套件 Doorkeeper 設定一個提供給手遊玩家的 OAuth 伺服器，讓玩家可以將手機跟帳號連結起來。不過大多數時候，手遊的 OAuth 伺服器其實是有特殊修改過的，因為相較於一般網站使用帳號密碼登入，手遊大多會直接幫玩家生成帳號後，再透過紀錄手機的 UUID 來綁定帳號。\n\n也就是說，登入流程會變成：\n\n* （第一次）生成帳號，回傳帳號跟密碼（引繼碼）\n* 透過帳號跟 UUID 產生 Access Token\n* 使用 Access Token 在這次的遊戲中進行\n\n> 以上只是給出一種情況，實際上還有很多細節或者不同的方式可以採用。\n\n完成上述的機制之後，客戶端只需要負責安全的保存帳號、密碼跟 Access Token 就可以正常的運行。\n\n實作：\n\n* OAuth2 伺服器搭建 / 管理\n* Unity3D 實作登入遊戲\n\n### 設計抽卡 API （60min）\n\n身為一個卡牌遊戲，怎麼能少掉抽卡呢！當我們可以順利登入遊戲後，最重要的就是讓玩家可以課金抽卡。不過串接 IAP 之類的事情會花上不少時間，所以我們就先專注在抽卡上吧！\n\n為了確保遊戲的公平性，所以我們要將所有的抽卡過程都在伺服器上實作，玩家只能發出「抽卡」的要求，然後伺服器回應一個「結果」到玩家端身上。\n\n不過跟網頁伺服器不一樣的事，我們不可能每次都將遊戲美術都下載一次。所以我們需要在遊戲開始前先做好素材檔案的打包，在玩家開始遊戲的時候預先的下載好卡片圖檔，而伺服器只需要回應對應的圖片路徑即可。\n\n實作：\n\n* 卡池、抽卡\n* Unity3D 選擇卡池跟顯示抽卡結果\n* 素材包概念（AssetBundle）\n\n### 設計任務 API （60min）\n\n> 跟抽卡差不多，只是實作另一種變化型跟示範簡易的防作弊（拒絕同時進行多個任務）\n\n### 總結（30min）\n\n到此為止，我們已經對如何設計一個卡牌遊戲有粗略地理解。不過在手遊開發上還是有不少地方需要注意，像是玩家大量增加後該如何透過 Sharding 的技巧改善遊戲可容納的玩家數量。跟一般網站不同的是玩家的操作都會造成寫入，要如何盡可能的有效設計 API 跟機制來減少伺服器的消耗，都會是之後需要考慮的課題。 \n\n----\n[Collaborative notes on HackMD](https://hackmd.io/c/coscup18-ruby/%2Fcoscup18-ruby-game)","addition":"","language":"漢語 / Mandarin Chinese","difficulty":"Begineer / 入門","audience":"有在打手遊的各位"}},"tracks":{"ruby":{"group":"ruby","track":"ruby","communities":["ruby"],"room":"IB502","title":"Ruby\t"}},"speakers":{"蒼時弦也":{"speaker":"蒼時弦也","name":"蒼時弦也","intro":"棲息在五倍紅寶石出礦坑的工程師，專長是挖坑。平常都在做網站或者奇怪的遊戲。","link":"","avatar":"/assets/s00061-1_v5q2bQKGJz-fHt67TFnPyX4_FRsrr7b.png"}},"communities":{"ruby":{"community":"ruby","title":"Ruby","intro":"https://www.ruby-lang.org/en/","link":"https://ruby.tw","image":"/assets/ruby-1sniD8sWRlsH1p9qHoF5FmQ6_wJ1UWcbx.png"}}}